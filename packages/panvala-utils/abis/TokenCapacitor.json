{
  "abi": [
    {
      "constant": true,
      "inputs": [{ "name": "", "type": "uint256" }],
      "name": "proposals",
      "outputs": [
        { "name": "gatekeeper", "type": "address" },
        { "name": "requestID", "type": "uint256" },
        { "name": "tokens", "type": "uint256" },
        { "name": "to", "type": "address" },
        { "name": "metadataHash", "type": "bytes" },
        { "name": "withdrawn", "type": "bool" }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "parameters",
      "outputs": [{ "name": "", "type": "address" }],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "lastLockedTime",
      "outputs": [{ "name": "", "type": "uint256" }],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "lifetimeReleasedTokens",
      "outputs": [{ "name": "", "type": "uint256" }],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "unlockedBalance",
      "outputs": [{ "name": "", "type": "uint256" }],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "lastLockedBalance",
      "outputs": [{ "name": "", "type": "uint256" }],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "proposalCount",
      "outputs": [{ "name": "", "type": "uint256" }],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "scale",
      "outputs": [{ "name": "", "type": "uint256" }],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{ "name": "_parameters", "type": "address" }],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        { "indexed": false, "name": "proposalID", "type": "uint256" },
        { "indexed": true, "name": "proposer", "type": "address" },
        { "indexed": false, "name": "requestID", "type": "uint256" },
        { "indexed": true, "name": "recipient", "type": "address" },
        { "indexed": false, "name": "tokens", "type": "uint256" },
        { "indexed": false, "name": "metadataHash", "type": "bytes" }
      ],
      "name": "ProposalCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        { "indexed": false, "name": "proposalID", "type": "uint256" },
        { "indexed": true, "name": "to", "type": "address" },
        { "indexed": false, "name": "numTokens", "type": "uint256" }
      ],
      "name": "TokensWithdrawn",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        { "indexed": true, "name": "payer", "type": "address" },
        { "indexed": true, "name": "donor", "type": "address" },
        { "indexed": false, "name": "numTokens", "type": "uint256" },
        { "indexed": false, "name": "metadataHash", "type": "bytes" }
      ],
      "name": "Donation",
      "type": "event"
    },
    {
      "constant": false,
      "inputs": [
        { "name": "to", "type": "address" },
        { "name": "tokens", "type": "uint256" },
        { "name": "metadataHash", "type": "bytes" }
      ],
      "name": "createProposal",
      "outputs": [{ "name": "", "type": "uint256" }],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        { "name": "beneficiaries", "type": "address[]" },
        { "name": "tokenAmounts", "type": "uint256[]" },
        { "name": "metadataHashes", "type": "bytes[]" }
      ],
      "name": "createManyProposals",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [{ "name": "proposalID", "type": "uint256" }],
      "name": "withdrawTokens",
      "outputs": [{ "name": "", "type": "bool" }],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        { "name": "donor", "type": "address" },
        { "name": "tokens", "type": "uint256" },
        { "name": "metadataHash", "type": "bytes" }
      ],
      "name": "donate",
      "outputs": [{ "name": "", "type": "bool" }],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [{ "name": "time", "type": "uint256" }],
      "name": "projectedUnlockedBalance",
      "outputs": [{ "name": "", "type": "uint256" }],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [{ "name": "time", "type": "uint256" }],
      "name": "projectedLockedBalance",
      "outputs": [{ "name": "", "type": "uint256" }],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [{ "name": "_days", "type": "uint256" }],
      "name": "calculateDecay",
      "outputs": [{ "name": "", "type": "uint256" }],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [{ "name": "time", "type": "uint256" }],
      "name": "updateBalancesUntil",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "updateBalances",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x60806040523480156200001157600080fd5b5060405160208062001e638339810180604052620000339190810190620002c0565b60008054600160a060020a031916600160a060020a0383161781556200006164010000000062000187810204565b600160a060020a03161415620000ae576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620000a590620003c7565b60405180910390fd5b6000620000c36401000000006200022a810204565b600160a060020a0316141562000107576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620000a59062000403565b5064e8b846a6f360045564e89bebb2c760055564e86340275e60065564e7f212788560075564e7105c5ca460085564e54f823e4560095564e1d7ff22af600a5564db1105ef5f600b5564ce1db4bb31600c5564b67774ace5600d55648eff3744c3600e556457d2f33b18600f5564e8d4a510006003554260125562000434565b600080546040517f12caba8d000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906312caba8d90620001d190600401620003df565b60206040518083038186803b158015620001ea57600080fd5b505afa158015620001ff573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525062000225919081019062000297565b905090565b600080546040517f12caba8d000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906312caba8d90620001d190600401620003f1565b600062000282825162000415565b9392505050565b600062000282825162000427565b600060208284031215620002aa57600080fd5b6000620002b8848462000274565b949350505050565b600060208284031215620002d357600080fd5b6000620002b8848462000289565b602181527f476174656b656570657220616464726573732063616e6e6f74206265207a657260208201527f6f00000000000000000000000000000000000000000000000000000000000000604082015260600190565b601181527f676174656b656570657241646472657373000000000000000000000000000000602082015260400190565b600c81527f746f6b656e416464726573730000000000000000000000000000000000000000602082015260400190565b601c81527f546f6b656e20616464726573732063616e6e6f74206265207a65726f00000000602082015260400190565b60208082528101620003d981620002e1565b92915050565b60208082528101620003d98162000337565b60208082528101620003d98162000367565b60208082528101620003d98162000397565b6000600160a060020a038216620003d9565b6000620003d98262000415565b611a1f80620004446000396000f3fe6080604052600436106100ea577c01000000000000000000000000000000000000000000000000000000006000350463013cf08b81146100ef578063021192421461012a57806319e660bf1461015757806323439b19146101795780632ab4bf6114610199578063315a095d146101c657806350eb9321146101e65780635cbd632b146102065780636f3fe40414610226578063890357301461023b578063a07c7d261461025d578063a6b8d04a14610272578063ab6ad45214610287578063b56ea0891461029c578063da35c664146102b1578063f51e181a146102c6578063fdac99f7146102db575b600080fd5b3480156100fb57600080fd5b5061010f61010a36600461139c565b6102fb565b6040516101219695949392919061173a565b60405180910390f35b34801561013657600080fd5b5061014a61014536600461139c565b6103c8565b6040516101219190611888565b34801561016357600080fd5b506101776101723660046112f4565b61047b565b005b34801561018557600080fd5b5061014a61019436600461139c565b610544565b3480156101a557600080fd5b506101b96101b436600461128f565b61057f565b604051610121919061179b565b3480156101d257600080fd5b506101b96101e136600461139c565b6106e4565b3480156101f257600080fd5b5061014a61020136600461128f565b610a8c565b34801561021257600080fd5b5061017761022136600461139c565b610ca9565b34801561023257600080fd5b50610177610dad565b34801561024757600080fd5b50610250610db8565b60405161012191906117ba565b34801561026957600080fd5b5061014a610dc7565b34801561027e57600080fd5b5061014a610dcd565b34801561029357600080fd5b5061014a610dd3565b3480156102a857600080fd5b5061014a610dd9565b3480156102bd57600080fd5b5061014a610ddf565b3480156102d257600080fd5b5061014a610de5565b3480156102e757600080fd5b5061014a6102f636600461139c565b610deb565b60016020818152600092835260409283902080548184015460028084015460038501546004860180548a516101009a8216159a909a02600019011693909304601f8101889004880289018801909952888852600160a060020a039485169893979196941694939092908301828280156103b55780601f1061038a576101008083540402835291602001916103b5565b820191906000526020600020905b81548152906001019060200180831161039857829003601f168201915b5050506005909301549192505060ff1686565b6000610fff8211156103f85760405160e560020a62461bcd0281526004016103ef906117c8565b60405180910390fd5b6003548260005b600c811015610472576001808316906002840490821415610459576000600484600c811061042957fe5b015460035490915061045190610445888463ffffffff610e6916565b9063ffffffff610e9d16565b955050610467565b801515610467575050610472565b9250506001016103ff565b50909392505050565b815183511461049f5760405160e560020a62461bcd0281526004016103ef90611858565b80518251146104c35760405160e560020a62461bcd0281526004016103ef90611858565b60005b835181101561053e57600084828151811015156104df57fe5b906020019060200201519050600084838151811015156104fb57fe5b9060200190602002015190506060848481518110151561051757fe5b90602001906020020151905061052e838383610a8c565b5050600190920191506104c69050565b50505050565b60008061056261055384610deb565b6011549063ffffffff610ec116565b601054909150610578908263ffffffff610ed616565b9392505050565b60008083116105a35760405160e560020a62461bcd0281526004016103ef906117d8565b336105ac610dad565b6011546105bf908563ffffffff610ed616565b60115560006105cc610ee8565b6040517f23b872dd000000000000000000000000000000000000000000000000000000008152909150600160a060020a038216906323b872dd9061061890859030908a906004016116f7565b602060405180830381600087803b15801561063257600080fd5b505af1158015610646573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061066a919081019061137e565b151561068b5760405160e560020a62461bcd0281526004016103ef906117e8565b85600160a060020a031682600160a060020a03167fe04d63c971c5bb3f134a82616395a70e14335bee84e0bcf3823c84893064304087876040516106d0929190611896565b60405180910390a350600195945050505050565b600254600090821061070b5760405160e560020a62461bcd0281526004016103ef90611868565b610713610fce565b600083815260016020818152604092839020835160c0810185528154600160a060020a0390811682528285015482850152600280840154838801526003840154909116606083015260048301805487516101009782161597909702600019011691909104601f81018590048502860185019096528585529094919360808601939092908301828280156107e75780601f106107bc576101008083540402835291602001916107e7565b820191906000526020600020905b8154815290600101906020018083116107ca57829003601f168201915b50505091835250506005919091015460ff1615156020918201528151908201516040517fbb58aef60000000000000000000000000000000000000000000000000000000081529293509091600160a060020a0383169163bb58aef6916108509190600401611888565b60206040518083038186803b15801561086857600080fd5b505afa15801561087c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506108a0919081019061137e565b15156108c15760405160e560020a62461bcd0281526004016103ef90611818565b60a0820151156108e65760405160e560020a62461bcd0281526004016103ef90611828565b60006108f0610ee8565b6000868152600160208190526040909120600501805460ff191690911790559050610919610dad565b604083015160105410156109425760405160e560020a62461bcd0281526004016103ef906117f8565b60408301516010546109599163ffffffff610ec116565b60105560408301516013546109739163ffffffff610ed616565b601355606083015160408085015190517fa9059cbb000000000000000000000000000000000000000000000000000000008152600160a060020a0384169263a9059cbb926109c39260040161171f565b602060405180830381600087803b1580156109dd57600080fd5b505af11580156109f1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610a15919081019061137e565b1515610a365760405160e560020a62461bcd0281526004016103ef906117e8565b8260600151600160a060020a03167f3f5fbaf86658fdadee77f1d46e7f8a72424ad9839eda6a1dc6eb0a4228e4226e868560400151604051610a799291906118b6565b60405180910390a2506001949350505050565b6000808251111515610ab35760405160e560020a62461bcd0281526004016103ef90611808565b6000610abd610f86565b9050610ac7610fce565b506040805160c081018252600160a060020a0380841680835260006020840181905283850189905291891660608401526080830187905260a0830182905292517f33a5ae29000000000000000000000000000000000000000000000000000000008152919290916333a5ae2990610b429088906004016117a9565b602060405180830381600087803b158015610b5c57600080fd5b505af1158015610b70573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610b9491908101906113ba565b6020808401828152600280546000818152600180865260409182902089518154600160a060020a0391821673ffffffffffffffffffffffffffffffffffffffff1991821617835596519282019290925591890151938201939093556060880151600382018054919094169416939093179091556080860151805194955090938693610c26926004850192910190611002565b5060a091909101516005909101805460ff1916911515919091179055600254610c50906001610ed6565b600255604051600160a060020a0389169033907fc3c0557a1809676afc095e90fd375d08b181e68b11d7d36338e80c21bb1b3c9690610c9690859087908d908d906118c4565b60405180910390a3979650505050505050565b6000610cb3610ee8565b600160a060020a03166370a08231306040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610cfa91906116e9565b60206040518083038186803b158015610d1257600080fd5b505afa158015610d26573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610d4a91908101906113ba565b90506000610d5783610deb565b601154909150811115610d6657fe5b610d8d601054610d8183601154610ec190919063ffffffff16565b9063ffffffff610ed616565b6010819055610da390839063ffffffff610ec116565b6011555050601255565b610db642610ca9565b565b600054600160a060020a031681565b60125481565b60135481565b60105481565b60115481565b60025481565b60035481565b601254600090821015610e135760405160e560020a62461bcd0281526004016103ef90611878565b6000610e2a60125484610ec190919063ffffffff16565b90506000610e44610145836201518063ffffffff610e9d16565b9050610e6160035461044583601154610e6990919063ffffffff16565b949350505050565b6000821515610e7a57506000610e97565b828202828482811515610e8957fe5b0414610e9457600080fd5b90505b92915050565b6000808211610eab57600080fd5b60008284811515610eb857fe5b04949350505050565b600082821115610ed057600080fd5b50900390565b600082820183811015610e9457600080fd5b600080546040517f12caba8d000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906312caba8d90610f3090600401611848565b60206040518083038186803b158015610f4857600080fd5b505afa158015610f5c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610f809190810190611271565b90505b90565b600080546040517f12caba8d000000000000000000000000000000000000000000000000000000008152600160a060020a03909116906312caba8d90610f3090600401611838565b6040805160c0810182526000808252602082018190529181018290526060808201839052608082015260a081019190915290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061104357805160ff1916838001178555611070565b82800160010185558215611070579182015b82811115611070578251825591602001919060010190611055565b5061107c929150611080565b5090565b610f8391905b8082111561107c5760008155600101611086565b6000610578823561197c565b6000610578825161197c565b6000601f820183136110c357600080fd5b81356110d66110d18261192f565b611908565b915081818352602084019350602081019050838560208402820111156110fb57600080fd5b60005b838110156111275781611111888261109a565b84525060209283019291909101906001016110fe565b5050505092915050565b6000601f8201831361114257600080fd5b81356111506110d18261192f565b81815260209384019390925082018360005b838110156111275781358601611178888261120a565b8452506020928301929190910190600101611162565b6000601f8201831361119f57600080fd5b81356111ad6110d18261192f565b915081818352602084019350602081019050838560208402820111156111d257600080fd5b60005b8381101561112757816111e88882611259565b84525060209283019291909101906001016111d5565b60006105788251611987565b6000601f8201831361121b57600080fd5b81356112296110d182611950565b9150808252602083016020830185838301111561124557600080fd5b6112508382846119a3565b50505092915050565b60006105788235610f83565b60006105788251610f83565b60006020828403121561128357600080fd5b6000610e6184846110a6565b6000806000606084860312156112a457600080fd5b60006112b0868661109a565b93505060206112c186828701611259565b925050604084013567ffffffffffffffff8111156112de57600080fd5b6112ea8682870161120a565b9150509250925092565b60008060006060848603121561130957600080fd5b833567ffffffffffffffff81111561132057600080fd5b61132c868287016110b2565b935050602084013567ffffffffffffffff81111561134957600080fd5b6113558682870161118e565b925050604084013567ffffffffffffffff81111561137257600080fd5b6112ea86828701611131565b60006020828403121561139057600080fd5b6000610e6184846111fe565b6000602082840312156113ae57600080fd5b6000610e618484611259565b6000602082840312156113cc57600080fd5b6000610e618484611265565b6113e18161197c565b82525050565b6113e181611987565b60006113fb82611978565b80845261140f8160208601602086016119af565b611418816119db565b9093016020019392505050565b6113e181611998565b601781527f54696d6520696e74657276616c20746f6f206c61726765000000000000000000602082015260400190565b601981527f43616e6e6f7420646f6e617465207a65726f20746f6b656e7300000000000000602082015260400190565b601981527f4661696c656420746f207472616e7366657220746f6b656e7300000000000000602082015260400190565b601c81527f496e73756666696369656e7420756e6c6f636b656420746f6b656e7300000000602082015260400190565b601c81527f6d65746164617461486173682063616e6e6f7420626520656d70747900000000602082015260400190565b601e81527f50726f706f73616c20686173206e6f74206265656e20617070726f7665640000602082015260400190565b603481527f546f6b656e73206861766520616c7265616479206265656e207769746864726160208201527f776e20666f7220746869732070726f706f73616c000000000000000000000000604082015260600190565b601181527f676174656b656570657241646472657373000000000000000000000000000000602082015260400190565b600c81527f746f6b656e416464726573730000000000000000000000000000000000000000602082015260400190565b602481527f416c6c20696e70757473206d7573742068617665207468652073616d65206c6560208201527f6e67746800000000000000000000000000000000000000000000000000000000604082015260600190565b601281527f496e76616c69642070726f706f73616c49440000000000000000000000000000602082015260400190565b602181527f54696d652063616e6e6f74206265206265666f7265206c617374206c6f636b6560208201527f6400000000000000000000000000000000000000000000000000000000000000604082015260600190565b6113e181610f83565b60208101610e9782846113d8565b6060810161170582866113d8565b61171260208301856113d8565b610e6160408301846116e0565b6040810161172d82856113d8565b61057860208301846116e0565b60c0810161174882896113d8565b61175560208301886116e0565b61176260408301876116e0565b61176f60608301866113d8565b818103608083015261178181856113f0565b905061179060a08301846113e7565b979650505050505050565b60208101610e9782846113e7565b6020808252810161057881846113f0565b60208101610e978284611425565b60208082528101610e978161142e565b60208082528101610e978161145e565b60208082528101610e978161148e565b60208082528101610e97816114be565b60208082528101610e97816114ee565b60208082528101610e978161151e565b60208082528101610e978161154e565b60208082528101610e97816115a4565b60208082528101610e97816115d4565b60208082528101610e9781611604565b60208082528101610e978161165a565b60208082528101610e978161168a565b60208101610e9782846116e0565b604081016118a482856116e0565b8181036020830152610e6181846113f0565b6040810161172d82856116e0565b608081016118d282876116e0565b6118df60208301866116e0565b6118ec60408301856116e0565b81810360608301526118fe81846113f0565b9695505050505050565b60405181810167ffffffffffffffff8111828210171561192757600080fd5b604052919050565b600067ffffffffffffffff82111561194657600080fd5b5060209081020190565b600067ffffffffffffffff82111561196757600080fd5b506020601f91909101601f19160190565b5190565b6000610e978261198c565b151590565b600160a060020a031690565b6000610e978261197c565b82818337506000910152565b60005b838110156119ca5781810151838201526020016119b2565b8381111561053e5750506000910152565b601f01601f19169056fea265627a7a72305820f6906dedb169dfd85f39f89258b5f77e254c33027bf5bd7c9f81be34ad797af76c6578706572696d656e74616cf50037",
  "contractName": "TokenCapacitor",
  "networks": {
    "420": {
      "events": {},
      "links": {},
      "address": "0xEe6069F52bC7111c218280a232671a627b1d3e1b",
      "transactionHash": "0xbc7fbbdf34a92d56c542b467af38d1b6d949187373605f8a249f6c5bd6dfe269"
    }
  },
  "devdoc": {
    "methods": {
      "calculateDecay(uint256)": {
        "details": "Return a scaled decay multiplier. Multiply by the balance, then divide by the scale."
      },
      "createManyProposals(address[],uint256[],bytes[])": {
        "details": "Create multiple proposals to send tokens to beneficiaries.",
        "params": {
          "beneficiaries": "The accounts to send tokens to",
          "metadataHashes": "Metadata hashes describing the proposals",
          "tokenAmounts": "The number of tokens to send to each beneficiary"
        }
      },
      "createProposal(address,uint256,bytes)": {
        "details": "Create a proposal to send tokens to a beneficiary.",
        "params": {
          "metadataHash": "A reference to metadata describing the proposal",
          "to": "The account to send the tokens to",
          "tokens": "The number of tokens to send"
        }
      },
      "donate(address,uint256,bytes)": {
        "details": "Donate tokens on behalf of the given donor. Donor of `address(0)` indicates an unspecified donor.",
        "params": {
          "donor": "The account on behalf of which this donation is being made",
          "metadataHash": "A reference to metadata describing the donation",
          "tokens": "The number of tokens to donate"
        }
      },
      "projectedLockedBalance(uint256)": {
        "details": "Number of tokens that will be locked by the given (future) time, not counting donations or withdrawals",
        "params": { "time": "The time to project for. Must be after the lastLockedTime." }
      },
      "projectedUnlockedBalance(uint256)": {
        "details": "Number of tokens that will be unlocked by the given (future) time, not counting donations or withdrawals",
        "params": { "time": "The time to project for. Must after the lastLockedTime." }
      },
      "updateBalances()": { "details": "Update the locked and unlocked balances up until `now`." },
      "updateBalancesUntil(uint256)": {
        "details": "Update the locked and unlocked balances according to the release rate, taking into account any donations or withdrawals since the last update. At each step, start decaying anew from the lastLockedBalance, as if it were the initial balance.",
        "params": {
          "time": "The time to update until. Must be less than 4096 days from the lastLockedTime."
        }
      },
      "withdrawTokens(uint256)": {
        "details": "Withdraw tokens associated with a proposal and send them to the named beneficiary. The proposal must have been included in an accepted grant slate.",
        "params": { "proposalID": "The proposal" }
      }
    }
  }
}
